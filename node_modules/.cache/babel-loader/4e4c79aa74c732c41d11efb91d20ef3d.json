{"ast":null,"code":"var _jsxFileName = \"/Users/musta88/Development/code/Module4/property-managment/front-end-property-managment/src/App.js\";\nimport React, { useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Switch, Route } from \"react-router-dom\";\nimport Login from \"./components/registrations/Login\";\nimport Signup from \"./components/registrations/Signup\";\nimport Paperbase from \"./components/dashboard/Paperbase\";\nimport { withRouter } from \"react-router\";\nimport \"./App.css\";\nimport { loginUser, handleClickLogOut } from \"./API/APIs\";\nimport { connect } from \"react-redux\";\n\nfunction App(props) {\n  const {\n    setLogOutState,\n    setLogInData,\n    isLoggedIn,\n    landlord,\n    issues,\n    tenants,\n    todos,\n    properties,\n    addProperty,\n    deleteProperty\n  } = props;\n  useEffect(() => {\n    loginStatus();\n  });\n\n  const loginStatus = () => {\n    loginUser(handleLogin, handleLogout).catch(error => console.log(\"api errors:\", error));\n  };\n\n  const handleLogin = data => {\n    setLogInData(data);\n  };\n\n  const handleLogout = () => {\n    setLogOutState(\"logout\");\n    props.history.push(\"/login\");\n  }; //update the properties state after a property been deleted\n\n\n  const handlePropertyState = (property, action) => {\n    if (action === \"add\") {\n      addProperty(property);\n    } else if (action === \"delete\") {\n      deleteProperty(property);\n    }\n  };\n\n  const handleClick = () => {\n    handleClickLogOut().then(response => {\n      this.handleLogout();\n      this.history.push(\"/login\");\n    }).catch(error => console.log(error));\n  };\n\n  const renderDashboard = () => {\n    return /*#__PURE__*/React.createElement(Route, {\n      path: \"/\",\n      render: routeProps => /*#__PURE__*/React.createElement(Paperbase, Object.assign({}, routeProps, {\n        logout: () => handleClick(),\n        user: landlord,\n        properties: properties,\n        issues: issues,\n        tenants: tenants,\n        handlePropertyState: handlePropertyState,\n        todos: todos,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 7\n      }\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, isLoggedIn ? renderDashboard() : /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/login\",\n    render: props => /*#__PURE__*/React.createElement(Login, Object.assign({}, props, {\n      handleLogin: handleLogin,\n      loggedInStatus: isLoggedIn,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 15\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/signup\",\n    render: props => /*#__PURE__*/React.createElement(Signup, Object.assign({}, props, {\n      handleLogin: handleLogin,\n      loggedInStatus: isLoggedIn,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 15\n      }\n    })),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  })));\n}\n\nconst mapStateToProps = state => {\n  return {\n    isLoggedIn: state.isLoggedIn,\n    landlord: state.landlord,\n    issues: state.issues,\n    tenants: state.tenants,\n    todos: state.todos,\n    properties: state.properties\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    setLogInData: data => dispatch({\n      type: \"SET_LOGIN_STATES\",\n      payload: {\n        data\n      }\n    }),\n    setLogOutState: data => dispatch({\n      type: \"SET_LOG_OUT\",\n      payload: {\n        data\n      }\n    }),\n    addProperty: property => dispatch({\n      type: \"ADD_PROPERTY\",\n      payload: {\n        property\n      }\n    }),\n    deleteProperty: property => dispatch({\n      type: \"DELETE_PROPERTY\",\n      payload: {\n        property\n      }\n    })\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(App));","map":{"version":3,"sources":["/Users/musta88/Development/code/Module4/property-managment/front-end-property-managment/src/App.js"],"names":["React","useEffect","axios","Switch","Route","Login","Signup","Paperbase","withRouter","loginUser","handleClickLogOut","connect","App","props","setLogOutState","setLogInData","isLoggedIn","landlord","issues","tenants","todos","properties","addProperty","deleteProperty","loginStatus","handleLogin","handleLogout","catch","error","console","log","data","history","push","handlePropertyState","property","action","handleClick","then","response","renderDashboard","routeProps","mapStateToProps","state","mapDispatchToProps","dispatch","type","payload"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport axios from \"axios\";\nimport { Switch, Route } from \"react-router-dom\";\nimport Login from \"./components/registrations/Login\";\nimport Signup from \"./components/registrations/Signup\";\nimport Paperbase from \"./components/dashboard/Paperbase\";\nimport { withRouter } from \"react-router\";\nimport \"./App.css\";\nimport { loginUser, handleClickLogOut } from \"./API/APIs\";\nimport { connect } from \"react-redux\";\n\nfunction App(props) {\n  const {\n    setLogOutState,\n    setLogInData,\n    isLoggedIn,\n    landlord,\n    issues,\n    tenants,\n    todos,\n    properties,\n    addProperty,\n    deleteProperty,\n  } = props;\n\n  useEffect(() => {\n    loginStatus();\n  });\n\n  const loginStatus = () => {\n    loginUser(handleLogin, handleLogout).catch((error) =>\n      console.log(\"api errors:\", error)\n    );\n  };\n\n  const handleLogin = (data) => {\n    setLogInData(data);\n  };\n\n  const handleLogout = () => {\n    setLogOutState(\"logout\");\n\n    props.history.push(\"/login\");\n  };\n\n  //update the properties state after a property been deleted\n  const handlePropertyState = (property, action) => {\n    if (action === \"add\") {\n      addProperty(property);\n    } else if (action === \"delete\") {\n      deleteProperty(property);\n    }\n  };\n\n  const handleClick = () => {\n    handleClickLogOut()\n      .then((response) => {\n        this.handleLogout();\n\n        this.history.push(\"/login\");\n      })\n      .catch((error) => console.log(error));\n  };\n\n  const renderDashboard = () => {\n    return (\n      <Route\n        path=\"/\"\n        render={(routeProps) => (\n          <Paperbase\n            {...routeProps}\n            logout={() => handleClick()}\n            user={landlord}\n            properties={properties}\n            issues={issues}\n            tenants={tenants}\n            handlePropertyState={handlePropertyState}\n            todos={todos}\n          />\n        )}\n      />\n    );\n  };\n\n  return (\n    <div>\n      {isLoggedIn ? (\n        renderDashboard()\n      ) : (\n        <Switch>\n          <Route\n            exact\n            path=\"/login\"\n            render={(props) => (\n              <Login\n                {...props}\n                handleLogin={handleLogin}\n                loggedInStatus={isLoggedIn}\n              />\n            )}\n          />\n          <Route\n            exact\n            path=\"/signup\"\n            render={(props) => (\n              <Signup\n                {...props}\n                handleLogin={handleLogin}\n                loggedInStatus={isLoggedIn}\n              />\n            )}\n          />\n        </Switch>\n      )}\n    </div>\n  );\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    isLoggedIn: state.isLoggedIn,\n    landlord: state.landlord,\n    issues: state.issues,\n    tenants: state.tenants,\n    todos: state.todos,\n    properties: state.properties,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    setLogInData: (data) =>\n      dispatch({ type: \"SET_LOGIN_STATES\", payload: { data } }),\n    setLogOutState: (data) =>\n      dispatch({ type: \"SET_LOG_OUT\", payload: { data } }),\n    addProperty: (property) =>\n      dispatch({ type: \"ADD_PROPERTY\", payload: { property } }),\n    deleteProperty: (property) =>\n      dispatch({ type: \"DELETE_PROPERTY\", payload: { property } }),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(App));\n"]},"metadata":{},"sourceType":"module"}